<form #deliveryForm="ngForm" autocomplete="off" novalidate>
  <!--Billing Address-->
  <fieldset>
    <mat-card class="billing-address">
      <mat-card-header>
        <mat-card-title>Billing Address</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div>
          <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
            <mat-label>First Name</mat-label>
            <input #billingFirstName="ngModel" [(ngModel)]="formData.first_name" matInput
                   minlength="2" name="billingFirstName" required>
            <mat-error *ngIf="(billingFirstName?.dirty || deliveryForm.submitted) && billingFirstName?.errors?.required">
              Field is required
            </mat-error>
            <mat-error *ngIf="(billingFirstName?.dirty || deliveryForm.submitted) && billingFirstName?.errors?.minlength">
               2 character at least
            </mat-error>
          </mat-form-field>
          <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
            <mat-label>Last Name</mat-label>
            <input #billingLastName="ngModel" [(ngModel)]="formData.last_name" matInput
                   minlength="2" name="billingLastName" required>
            <mat-error *ngIf="(billingLastName?.dirty || deliveryForm.submitted)&& billingLastName?.errors?.required">
              Field is required
            </mat-error>
            <mat-error *ngIf="(billingLastName?.dirty || deliveryForm.submitted) && billingLastName?.errors?.minlength">
              2 character at least
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-12">
          <mat-form-field class="w-100">
            <mat-label>Address Line 1</mat-label>
            <input #billingAddress1="ngModel" [(ngModel)]="formData.address_1" matInput
                   minlength="2" name="billingAddress1" required>
            <mat-error *ngIf="(billingAddress1?.dirty || deliveryForm.submitted)&& billingAddress1?.errors?.required">
              Field is required
            </mat-error>
            <mat-error *ngIf="(billingAddress1?.dirty || deliveryForm.submitted) && billingAddress1?.errors?.minlength">
              2 character at least
            </mat-error>
          </mat-form-field>

        </div>
        <div class="col-12">
          <mat-form-field class="w-100">
            <mat-label>Address Line 2</mat-label>
            <input #billingAddress2="ngModel" [(ngModel)]="formData.address_2" matInput
                   minlength="2" name="billingAddress2">
            <mat-error *ngIf="(billingAddress2?.dirty || deliveryForm.submitted) && billingAddress2?.errors?.minlength">
              2 character at least
            </mat-error>
          </mat-form-field>
        </div>
        <div>
          <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
            <mat-label>City/District</mat-label>
            <input #billingCity="ngModel" [(ngModel)]="formData.city" matInput
                   minlength="2" name="billingCity" required >
            <mat-error *ngIf="(billingCity?.dirty || deliveryForm.submitted)&& billingCity?.errors?.required">
              Field is required
            </mat-error>
            <mat-error *ngIf="(billingCity?.dirty || deliveryForm.submitted) && billingCity?.errors?.minlength">
              2 character at least
            </mat-error>
          </mat-form-field>
          <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
            <mat-label>Province/State</mat-label>
            <input #billingState="ngModel" [(ngModel)]="formData.state" matInput
                   minlength="2" name="billingState" required>
            <mat-error *ngIf="(billingState?.dirty || deliveryForm.submitted)&& billingState?.errors?.required">
              Field is required
            </mat-error>
            <mat-error *ngIf="(billingState?.dirty || deliveryForm.submitted) && billingState?.errors?.minlength">
              2 character at least
            </mat-error>
          </mat-form-field>
          <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
            <mat-label>Country</mat-label>
            <input #billingCountry="ngModel" [(ngModel)]="formData.country" matInput
                   minlength="2" name="billingCountry" required>
            <mat-error *ngIf="(billingCountry?.dirty || deliveryForm.submitted)&& billingCountry?.errors?.required">
              Field is required
            </mat-error>
            <mat-error *ngIf="(billingCountry?.dirty || deliveryForm.submitted) && billingCountry?.errors?.minlength">
              2 character at least
            </mat-error>
          </mat-form-field>
          <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
            <mat-label>Postal Code</mat-label>
            <input #billingPostalCode="ngModel" [(ngModel)]="formData.postal_code" matInput
                   maxlength="3" minlength="3" name="billingPostalCode" pattern="[0-9]+" required>
            <mat-error *ngIf="(billingPostalCode?.dirty || deliveryForm.submitted)&& billingPostalCode?.errors?.required">
              Field is required
            </mat-error>
            <mat-error *ngIf="(billingPostalCode?.dirty || deliveryForm.submitted)&& billingPostalCode?.errors?.pattern">
              Numbers only
            </mat-error>
            <mat-error *ngIf="(billingPostalCode?.dirty || deliveryForm.submitted) && (billingPostalCode?.errors?.minlength || billingCountry?.errors?.maxlength )">
              3 character required
            </mat-error>
          </mat-form-field>
        </div>
      </mat-card-content>
    </mat-card>
  </fieldset>

  <!--Shipping Address-->
  <fieldset class="my-3 actions-box">
    <div class="my-2">
      <mat-checkbox [(ngModel)]="formData.is_same_address" name="shippingIsSameBilling">My shipping address is same as my billing
        address.
      </mat-checkbox>
    </div>
  </fieldset>
  <fieldset *ngIf="!formData.is_same_address">
    <mat-card class="shipping-address">
      <mat-card-header>
        <mat-card-title>Shipping Address</mat-card-title>
      </mat-card-header>
      <mat-card-content>
          <div>
            <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
              <mat-label>First Name</mat-label>
              <input #shippingFirstName="ngModel" [(ngModel)]="formData.shipping_first_name"
                     matInput
                      minlength="2" name="shippingFirstName" required>
              <mat-error *ngIf="(shippingFirstName?.dirty || deliveryForm.submitted)&& shippingFirstName?.errors?.required">
                Field is required
              </mat-error>
              <mat-error *ngIf="(shippingFirstName?.dirty || deliveryForm.submitted) && shippingFirstName?.errors?.minlength">
                2 character at least
              </mat-error>
            </mat-form-field>
            <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
              <mat-label>Last Name</mat-label>
              <input #shippingLastName="ngModel" [(ngModel)]="formData.shipping_last_name"
                     matInput minlength="2" name="shippingLastName" required>
              <mat-error *ngIf="(shippingLastName?.dirty || deliveryForm.submitted)&& shippingLastName?.errors?.required">
                Field is required
              </mat-error>
              <mat-error *ngIf="(shippingLastName?.dirty || deliveryForm.submitted) && shippingLastName?.errors?.minlength">
                2 character at least
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-12">
            <mat-form-field class="w-100">
              <mat-label>Address Line 1</mat-label>
              <input #shippingAddressLine1="ngModel" [(ngModel)]="formData.shipping_address_1" matInput
                      minlength="2" name="shippingAddressLine1" required>

              <mat-error *ngIf="(shippingAddressLine1?.dirty || deliveryForm.submitted)&& shippingAddressLine1?.errors?.required">
                Field is required
              </mat-error>
              <mat-error *ngIf="(shippingAddressLine1?.dirty || deliveryForm.submitted) && shippingAddressLine1?.errors?.minlength">
                2 character at least
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-12">
            <mat-form-field class="w-100">
              <mat-label>Address Line 2</mat-label>
              <input #shippingAddressLine2="ngModel" [(ngModel)]="formData.shipping_address_2" matInput
                     minlength="2" name="shippingAddressLine2">
              <mat-error *ngIf="(shippingAddressLine2?.dirty || deliveryForm.submitted) && shippingAddressLine2?.errors?.minlength">
                2 character at least
              </mat-error>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
              <mat-label>City/District</mat-label>
              <input #shippingCity="ngModel" [(ngModel)]="formData.shipping_city" matInput
                     minlength="2" name="shippingCity" required>
              <mat-error *ngIf="(shippingCity?.dirty || deliveryForm.submitted)&& shippingCity?.errors?.required">
                Field is required
              </mat-error>
              <mat-error *ngIf="(shippingCity?.dirty || deliveryForm.submitted) && shippingCity?.errors?.minlength">
                2 character at least
              </mat-error>
            </mat-form-field>
            <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
              <mat-label>Province/State</mat-label>
              <input #shippingState="ngModel" [(ngModel)]="formData.shipping_state"  matInput
                     minlength="2" name="shippingState" required>
              <mat-error *ngIf="(shippingState?.dirty || deliveryForm.submitted)&& shippingState?.errors?.required">
                Field is required
              </mat-error>
              <mat-error *ngIf="(shippingState?.dirty || deliveryForm.submitted) && shippingState?.errors?.minlength">
                2 character at least
              </mat-error>
            </mat-form-field>
            <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
              <mat-label>Country</mat-label>
              <input #shippingCountry="ngModel" [(ngModel)]="formData.shipping_country" matInput
                     minlength="2" name="shippingCountry" required>
              <mat-error *ngIf="(shippingCountry?.dirty || deliveryForm.submitted)&& shippingCountry?.errors?.required">
                Field is required
              </mat-error>
              <mat-error *ngIf="(shippingCountry?.dirty || deliveryForm.submitted) && shippingCountry?.errors?.minlength">
                2 character at least
              </mat-error>
            </mat-form-field>
            <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
              <mat-label>Postal Code</mat-label>
              <input #shippingPostalCode="ngModel" [(ngModel)]="formData.shipping_postal_code" matInput maxlength="3"
                      minlength="2" name="shippingPostalCode" pattern="[0-9]+"  required>
              <mat-error *ngIf="(shippingPostalCode?.dirty || deliveryForm.submitted)&& shippingPostalCode?.errors?.required">
                Field is required
              </mat-error>
              <mat-error *ngIf="(shippingPostalCode?.dirty || deliveryForm.submitted)&& shippingPostalCode?.errors?.pattern">
                Numbers only
              </mat-error>
              <mat-error *ngIf="(shippingPostalCode?.dirty || deliveryForm.submitted) && (shippingPostalCode?.errors?.minlength || billingCountry?.errors?.maxlength )">
                3 character required
              </mat-error>
            </mat-form-field>
          </div>
      </mat-card-content>
    </mat-card>
  </fieldset>

  <!--Account / Guest-->
  <fieldset class="my-3 actions-box">
    <div>
      <mat-radio-group #createAccount="ngModel" [(ngModel)]="formData.is_new_account" name="createAccount">
        <mat-radio-button [value]="false" class="mr-2" name="accountCreate">Create Account</mat-radio-button>
        <mat-radio-button [value]="true" name="accountGuest">Checkout as a Guest</mat-radio-button>
      </mat-radio-group>
    </div>
  </fieldset>

  <fieldset>
    <mat-card class="create-account">
      <mat-card-content>
          <div class="col-12">
            <mat-form-field class="w-100">
              <mat-label>Email </mat-label>
              <input #accountEmail="ngModel" [(ngModel)]="formData.email" matInput name="accountEmail" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                     required type="email">
              <mat-error *ngIf="(accountEmail?.dirty || deliveryForm.submitted)&& accountEmail?.errors?.required">
                Field is required
              </mat-error>
              <mat-error *ngIf="(accountEmail?.dirty || deliveryForm.submitted)&& accountEmail?.errors?.pattern">
                Invalid format
              </mat-error>
            </mat-form-field>
          </div>
          <div *ngIf="!formData.is_new_account">
            <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
              <mat-label>Password </mat-label>
              <input #accountPassword="ngModel" (input)="passWordValidator()" [(ngModel)]="formData.password"  [pattern]="passwordPattern" matInput
                     name="accountPassword" required  type="password">
              <mat-error *ngIf="(accountPassword?.dirty || deliveryForm.submitted)&& accountPassword?.errors?.required">
                Field is required
              </mat-error>
              <mat-error *ngIf="(accountPassword?.dirty || deliveryForm.submitted)&& accountPassword?.errors?.pattern">
                Invalid password format
              </mat-error>

            </mat-form-field>
            <mat-form-field class="col-sm-12 col-md-6 col-lg-3">
              <mat-label>Confirm Password</mat-label>
              <input #accountConfirmPassword="ngModel" (keyup)="passWordValidator()" [(ngModel)]="formData.password_confirmation"  [pattern]="passwordPattern" matInput
                     name="accountConfirmPassword" required  type="password">
              <mat-error *ngIf="(accountConfirmPassword?.dirty || deliveryForm.submitted)&& accountConfirmPassword?.errors?.required">
                Field is required
              </mat-error>
              <mat-error *ngIf="(accountConfirmPassword?.dirty || deliveryForm.submitted)&& accountConfirmPassword?.errors?.pattern">
                Invalid password format
              </mat-error>
              <!--<mat-error *ngIf="(accountConfirmPassword?.dirty || deliveryForm.submitted)&& (formData.password !== formData.password_confirmation)">
                Passwords must match
              </mat-error>-->
              <mat-error *ngIf="(accountConfirmPassword?.dirty || deliveryForm.submitted)&& (accountConfirmPassword?.errors?.passworderror == true)">
                <span>Passwords must match</span>
              </mat-error>
            </mat-form-field>
          </div>
      </mat-card-content>
    </mat-card>
  </fieldset>
</form>


